<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>üíå For Fiza</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Dancing+Script:wght@400;700&family=Petit+Formal+Script&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --deep-red: #8B0A1A;
            --rose: #C41E3A;
            --blush: #E8A0A0;
            --cream: #FFF8F0;
            --gold: #D4AF37;
            --gold-light: #F4E4BC;
            --shadow: rgba(80, 0, 20, 0.4);
        }

        body {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(ellipse at 30% 20%, #2D0A10 0%, #1A0508 50%, #0D0204 100%);
            font-family: 'Cormorant Garamond', Georgia, serif;
            overflow: hidden;
            position: relative;
        }

        /* Floating hearts background */
        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        .floating-heart {
            position: absolute;
            font-size: 20px;
            color: rgba(196, 30, 58, 0.15);
            animation: floatUp 15s infinite linear;
            text-shadow: 0 0 10px rgba(196, 30, 58, 0.3);
        }

        @keyframes floatUp {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0.5);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% {
                transform: translateY(-100vh) rotate(360deg) scale(1.2);
                opacity: 0;
            }
        }

        /* Main container */
        .valentine-container {
            perspective: 3000px;
            z-index: 1;
        }

        /* The entire card that can flip to back */
        .card-flipper {
            position: relative;
            width: 320px;
            height: 450px;
            transform-style: preserve-3d;
            transition: transform 1s cubic-bezier(0.4, 0.0, 0.2, 1), width 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        @media (min-width: 768px) {
            .card-flipper {
                width: 340px;
                height: 480px;
            }
        }

        /* When book is open, double the width */
        .card-flipper.book-open {
            width: 640px;
        }

        @media (min-width: 768px) {
            .card-flipper.book-open {
                width: 680px;
            }
        }

        .card-flipper.flipped-to-back {
            transform: rotateY(180deg);
        }

        /* Front side (the openable book) */
        .card-front-side {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            transform-style: preserve-3d;
        }

        /* Back of entire card - same size as closed card */
        .card-back-side {
            position: absolute;
            width: 320px;
            height: 100%;
            left: 50%;
            transform: translateX(-50%) rotateY(180deg);
            backface-visibility: hidden;
            background: linear-gradient(145deg, var(--rose) 0%, var(--deep-red) 100%);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            box-shadow: 0 25px 60px var(--shadow);
        }

        @media (min-width: 768px) {
            .card-back-side {
                width: 340px;
            }
        }

        /* When book is closed, back is centered */
        .card-flipper:not(.book-open) .card-back-side {
            left: 0;
            transform: rotateY(180deg);
        }

        /* Decorative border on back */
        .card-back-side::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            pointer-events: none;
        }

        .back-content {
            text-align: center;
            z-index: 1;
        }

        .back-question {
            font-family: 'Petit Formal Script', cursive;
            font-size: 1.3rem;
            color: var(--cream);
            margin-bottom: 30px;
            line-height: 1.6;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .keep-button {
            background: linear-gradient(145deg, var(--gold) 0%, #B8962E 100%);
            border: none;
            padding: 15px 40px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            color: var(--deep-red);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            font-weight: 600;
        }

        .keep-button:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
        }

        .keep-button:active {
            transform: scale(1.02);
        }

        .flip-back-hint {
            position: absolute;
            bottom: 25px;
            font-size: 0.8rem;
            color: rgba(255, 248, 240, 0.5);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Kept state */
        .kept-message {
            display: none;
            text-align: center;
        }

        .kept-message.show {
            display: block;
            animation: fadeInKept 1s ease forwards;
        }

        .kept-message .heart-icon {
            font-size: 4rem;
            color: var(--gold);
            animation: heartPulse 1.5s ease-in-out infinite;
            display: block;
            margin-bottom: 20px;
        }

        .kept-message .message {
            font-family: 'Petit Formal Script', cursive;
            font-size: 1.1rem;
            color: var(--gold-light);
            line-height: 1.8;
        }

        @keyframes fadeInKept {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes heartPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* The book structure */
        .book {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
        }

        /* Inner pages container - hidden when closed, revealed when open */
        .inner-pages {
            position: absolute;
            left: 50%; /* Start from middle - letter on right side */
            top: 0;
            width: 50%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease 0.3s, visibility 0.5s ease 0.3s;
            border-radius: 0 12px 12px 0;
            overflow: hidden;
            box-shadow: 5px 5px 20px rgba(0, 0, 0, 0.3);
        }

        .book.open .inner-pages {
            opacity: 1;
            visibility: visible;
        }

        /* Inner right page (Letter) - takes full width of inner-pages */
        .inner-right-page {
            width: 100%;
            height: 100%;
            background: linear-gradient(145deg, #8B0A1A 0%, #6B0515 50%, #4A0510 100%);
            overflow: hidden;
            position: relative;
            border-radius: 0 12px 12px 0;
        }

        /* Decorative pattern overlay */
        .inner-right-page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(212, 175, 55, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(212, 175, 55, 0.03) 0%, transparent 40%);
            pointer-events: none;
            border-radius: inherit;
            z-index: 1;
        }

        /* Gold border decoration */
        .inner-right-page::after {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            pointer-events: none;
            z-index: 2;
        }

        /* Front cover - full size when closed, flips to left when open */
        .front-cover {
            position: absolute;
            right: 0;
            top: 0;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transform-origin: left center;
            transition: transform 0.8s cubic-bezier(0.4, 0.0, 0.2, 1), width 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
            z-index: 10;
            cursor: pointer;
        }

        /* When open, cover becomes half width and flips */
        .book.open .front-cover {
            width: 50%;
            transform: rotateY(-160deg);
        }

        /* Disable clicks on cover-front when open, but keep cover-back clickable */
        .book.open .cover-front {
            pointer-events: none;
        }

        .book.open .cover-back {
            pointer-events: auto;
        }

        .cover-front,
        .cover-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
        }

        .cover-front {
            background: linear-gradient(145deg, var(--rose) 0%, var(--deep-red) 100%);
            box-shadow: 5px 5px 20px var(--shadow);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* Decorative pattern on cover */
        .cover-front::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 30% 40%, rgba(255, 255, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 70% 60%, rgba(255, 255, 255, 0.03) 0%, transparent 40%);
            border-radius: inherit;
            pointer-events: none;
        }

        .cover-front::after {
            content: '';
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            border: 1px solid rgba(212, 175, 55, 0.25);
            border-radius: 8px;
            pointer-events: none;
        }

        .cover-back {
            background: linear-gradient(145deg, #8B0A1A 0%, #6B0515 50%, #4A0510 100%);
            transform: rotateY(180deg);
            border-radius: 12px 0 0 12px;
            overflow: hidden;
        }

        /* Gold border on cover back */
        .cover-back::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 5px;
            bottom: 10px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-right: none;
            border-radius: 8px 0 0 8px;
            pointer-events: none;
            z-index: 1;
        }

        /* Decorative pattern on cover back */
        .cover-back::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(212, 175, 55, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(212, 175, 55, 0.03) 0%, transparent 40%);
            pointer-events: none;
            z-index: 0;
        }

        /* Front cover content */
        .cover-content {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            pointer-events: none;
            z-index: 5;
        }

        .main-heart {
            position: relative;
            width: 140px;
            height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            animation: heartPulse 2s ease-in-out infinite;
        }

        @media (min-width: 768px) {
            .main-heart {
                width: 160px;
                height: 160px;
            }
        }

        .heart-shape {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(145deg, var(--gold) 0%, #B8962E 100%);
            clip-path: path('M70 25 C70 8, 54 0, 35 0 C17.5 0, 0 17.5, 0 40 C0 70, 35 96, 70 120 C105 96, 140 70, 140 40 C140 17.5, 122.5 0, 105 0 C86 0, 70 8, 70 25');
            filter: drop-shadow(0 8px 20px rgba(139, 10, 26, 0.5));
        }

        .heart-shape::before {
            content: '';
            position: absolute;
            top: 10%;
            left: 20%;
            width: 30%;
            height: 30%;
            background: radial-gradient(ellipse, rgba(255, 255, 255, 0.4) 0%, transparent 70%);
            border-radius: 50%;
        }

        .heart-text {
            position: relative;
            z-index: 1;
            text-align: center;
            padding-top: 15px;
        }

        .heart-text .name {
            font-family: 'Dancing Script', cursive;
            font-size: 2rem;
            font-weight: 700;
            color: var(--deep-red);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
            letter-spacing: 1px;
        }

        @media (min-width: 768px) {
            .heart-text .name {
                font-size: 2.2rem;
            }
        }

        .romantic-subtext {
            font-family: 'Petit Formal Script', cursive;
            font-size: 0.95rem;
            color: var(--gold-light);
            margin-top: 25px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .created-by {
            position: absolute;
            bottom: 25px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 0.7rem;
            color: rgba(255, 248, 240, 0.4);
            font-style: italic;
            letter-spacing: 2px;
            width: 200%;
            text-align: center;
        }

        .right-cover .created-by {
            left: -100%;
        }

        /* Open hint */
        .open-hint {
            position: absolute;
            bottom: 55px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--gold-light);
            font-size: 0.85rem;
            opacity: 0;
            animation: fadeInHint 1s ease 1.5s forwards;
            width: 200%;
            justify-content: center;
        }

        .right-cover .open-hint {
            left: -100%;
        }

        .open-hint span:first-child {
            animation: swipeLeft 2s ease-in-out 2.5s infinite;
        }

        .open-hint span:last-child {
            animation: swipeRight 2s ease-in-out 2.5s infinite;
        }

        @keyframes swipeLeft {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(-8px); }
        }

        @keyframes swipeRight {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(8px); }
        }

        @keyframes fadeInHint {
            to { opacity: 0.8; }
        }

        .book.open .open-hint {
            display: none;
        }

        /* Inner page content - Left (Image Montage) - 3 rows x 2 columns */
        .montage-content {
            height: 100%;
            padding: 15px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr 1fr;
            gap: 10px;
            position: relative;
            z-index: 10;
        }

        .montage-image {
            background: linear-gradient(135deg, var(--gold) 0%, #B8962E 100%);
            border-radius: 8px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(212, 175, 55, 0.4);
        }

        .montage-image:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        .montage-image.active {
            animation: imageWiggle 0.6s ease;
        }

        @keyframes imageWiggle {
            0%, 100% { transform: rotate(0deg) scale(1.03); }
            25% { transform: rotate(-4deg) scale(1.06); }
            75% { transform: rotate(4deg) scale(1.06); }
        }

        /* Fullscreen image overlay */
        .image-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(13, 2, 4, 0.95);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease;
        }

        .image-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .overlay-content {
            position: relative;
            max-width: 85%;
            max-height: 80%;
            transform: scale(0.5);
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .image-overlay.active .overlay-content {
            transform: scale(1);
        }

        .overlay-image {
            max-width: 100%;
            max-height: 70vh;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 0 3px var(--gold);
            object-fit: contain;
        }

        .overlay-text {
            position: absolute;
            bottom: -50px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Dancing Script', cursive;
            font-size: 1.8rem;
            color: var(--gold-light);
            text-align: center;
            text-shadow: 0 3px 10px rgba(0, 0, 0, 0.5);
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.4s ease 0.3s, bottom 0.4s ease 0.3s;
        }

        .image-overlay.active .overlay-text {
            opacity: 1;
            bottom: -60px;
        }

        .overlay-close-hint {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Cormorant Garamond', serif;
            font-size: 0.9rem;
            color: rgba(255, 248, 240, 0.5);
            opacity: 0;
            transition: opacity 0.4s ease 0.5s;
        }

        .image-overlay.active .overlay-close-hint {
            opacity: 1;
        }

        /* Hearts decoration around expanded image */
        .overlay-hearts {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .overlay-heart {
            position: absolute;
            color: var(--rose);
            opacity: 0;
            font-size: 1.5rem;
            animation: floatHeart 2s ease-in-out infinite;
        }

        .image-overlay.active .overlay-heart {
            opacity: 0.6;
        }

        .overlay-heart:nth-child(1) { top: 10%; left: 10%; animation-delay: 0s; }
        .overlay-heart:nth-child(2) { top: 15%; right: 15%; animation-delay: 0.3s; }
        .overlay-heart:nth-child(3) { bottom: 20%; left: 8%; animation-delay: 0.6s; }
        .overlay-heart:nth-child(4) { bottom: 15%; right: 10%; animation-delay: 0.9s; }

        @keyframes floatHeart {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.1); }
        }

        .montage-image .icon {
            font-size: 1.8rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .montage-image img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            border-radius: 8px;
            transition: transform 0.3s ease;
        }

        .image-phrase {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Dancing Script', cursive;
            font-size: 0.75rem;
            color: var(--cream);
            white-space: nowrap;
            opacity: 0;
            transition: all 0.4s ease;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .montage-image.active .image-phrase {
            bottom: 6px;
            opacity: 1;
        }

        .touch-hint-img {
            position: absolute;
            top: 4px;
            right: 6px;
            font-size: 0.55rem;
            color: rgba(255, 255, 255, 0.6);
            opacity: 0;
            animation: fadeInHint 1s ease 2s forwards;
        }

        /* Inner page content - Right (Letter) */
        .letter-scroll {
            position: absolute;
            top: 25px;
            left: 20px;
            right: 15px;
            bottom: 25px;
            overflow-y: auto;
            overflow-x: hidden;
            padding-right: 10px;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
            overscroll-behavior-y: contain;
            touch-action: pan-y;
            z-index: 10;
            /* Hide scrollbar but keep functionality */
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE/Edge */
        }

        .letter-scroll::-webkit-scrollbar {
            display: none; /* Chrome/Safari */
        }

        .letter-greeting {
            font-family: 'Dancing Script', cursive;
            font-size: 1.5rem;
            color: var(--gold);
            margin-bottom: 15px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .letter-body {
            font-family: 'Cormorant Garamond', serif;
            font-size: 0.95rem;
            line-height: 1.75;
            color: var(--cream);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .letter-body p {
            margin-bottom: 12px;
            text-indent: 1.2em;
        }

        .letter-signature {
            font-family: 'Dancing Script', cursive;
            font-size: 1.25rem;
            color: var(--gold-light);
            text-align: right;
            margin-top: 15px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Decorative corners */
        .corner-heart {
            position: absolute;
            font-size: 1rem;
            color: var(--gold);
            opacity: 0.5;
            z-index: 5;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .corner-heart.tl { top: 12px; left: 12px; }
        .corner-heart.tr { top: 12px; right: 12px; }
        .corner-heart.bl { bottom: 12px; left: 12px; }
        .corner-heart.br { bottom: 12px; right: 12px; }

        /* Flip to back hint - positioned below the card, minimal text */
        .flip-hint {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            color: rgba(255, 248, 240, 0.5);
            opacity: 0;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: opacity 0.3s ease;
            white-space: nowrap;
            z-index: 20;
            font-family: 'Cormorant Garamond', serif;
        }

        .book.open .flip-hint {
            animation: fadeInHint 1s ease 1s forwards;
        }

        /* Swipe right hint - on top of letter */
        .swipe-right-hint {
            position: absolute;
            top: -30px;
            right: 25%;
            transform: translateX(50%);
            font-size: 0.7rem;
            color: rgba(255, 248, 240, 0.5);
            opacity: 0;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: opacity 0.3s ease;
            white-space: nowrap;
            z-index: 20;
            font-family: 'Cormorant Garamond', serif;
        }

        .book.open .swipe-right-hint {
            animation: fadeInHint 1s ease 1.2s forwards;
        }

        /* Sparkle effects */
        .sparkle {
            position: fixed;
            pointer-events: none;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--gold) 0%, transparent 70%);
            animation: sparkle 0.8s ease forwards;
            z-index: 100;
        }

        @keyframes sparkle {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: scale(2) rotate(180deg);
                opacity: 0;
            }
        }

        /* Mobile adjustments */
        @media (max-width: 360px) {
            .card-flipper {
                width: 290px;
                height: 420px;
            }

            .main-heart {
                width: 120px;
                height: 120px;
            }

            .heart-shape {
                clip-path: path('M60 21 C60 7, 46 0, 30 0 C15 0, 0 15, 0 34 C0 60, 30 82, 60 103 C90 82, 120 60, 120 34 C120 15, 105 0, 90 0 C74 0, 60 7, 60 21');
            }

            .heart-text .name {
                font-size: 1.7rem;
            }

            .letter-greeting {
                font-size: 1.1rem;
            }

            .letter-body {
                font-size: 0.8rem;
            }
        }

        /* Rotate message */
        .rotate-message {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--deep-red);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: var(--cream);
            text-align: center;
            padding: 20px;
        }

        .rotate-message .icon {
            font-size: 3rem;
            margin-bottom: 20px;
            animation: rotatePhone 2s ease-in-out infinite;
        }

        @keyframes rotatePhone {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(90deg); }
        }

        @media (max-height: 450px) and (orientation: landscape) {
            .rotate-message {
                display: flex;
            }
        }
    </style>
</head>
<body>
    <!-- Rotate message -->
    <div class="rotate-message">
        <span class="icon">üì±</span>
        <p style="font-family: 'Cormorant Garamond', serif; font-size: 1.2rem;">
            Please rotate your device<br>for the best experience
        </p>
    </div>

    <!-- Floating hearts -->
    <div class="floating-hearts" id="floatingHearts"></div>

    <!-- Main container -->
    <div class="valentine-container">
        <div class="card-flipper" id="cardFlipper">
            
            <!-- Front side (the openable book) -->
            <div class="card-front-side">
                <div class="book" id="book">
                    
                    <!-- Inner pages (revealed when cover opens) - LETTER ONLY -->
                    <div class="inner-pages">
                        <div class="inner-right-page">
                            <span class="corner-heart tl">‚ô•</span>
                            <span class="corner-heart tr">‚ô•</span>
                            <span class="corner-heart bl">‚ô•</span>
                            <span class="corner-heart br">‚ô•</span>
                            
                            <div class="letter-scroll">
                                <div class="letter-greeting">My Dearest Fiza,</div>
                                <div class="letter-body">
                                    <p>Jabse tum zindagi me aaye ho, mujhe har din ek naya khushi milta hai. Tumhara sath mere dil ko har din ek nayi zindagi deta hai.</p>
                                    
                                    <p>Teri hasi mujhe suraj ki us roshni jaise chamkati hai jiski mujhe kabhi need nahi thi par aadat ho gayi hai teri mast is the greatest blessing I've ever known. Tere hathon me meine mera ghar paaya</p>
                                    
                                    <p>You make me want to be better, dream better, and love deeper aur dress in style not like gareeb. With you, meine zindagi jeena sikha hai tere se darr ke meine tujhe pyaar karna sikha hai</p>
                                    
                                    <p>Thank you for being my partner, my best friend, my Kuchu, Buddu, Manguu and my everything. I promise to cherish you today, tomorrow, and for all the tomorrows after that.</p>
                                    
                                    <p>You are not just my Valentine, you are my forever my Life and my everything.</p>
                                </div>
                                <div class="letter-signature">
                                    With all my love, my life<br>
                                    Yours Hamesha ‚ô•
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Front cover -->
                    <div class="front-cover" id="frontCover">
                        <div class="cover-front">
                            <div class="cover-content">
                                <div class="main-heart">
                                    <div class="heart-shape"></div>
                                    <div class="heart-text">
                                        <span class="name">Devfiz</span>
                                    </div>
                                </div>
                                <div class="romantic-subtext">Two hearts, one love</div>
                                <div class="open-hint">
                                    <span>‚Üí</span>
                                    <span>Tap to open</span>
                                </div>
                                <div class="created-by">Created by Love, only for Fiza</div>
                            </div>
                        </div>
                        <div class="cover-back">
                            <div class="montage-content">
                                <div class="montage-image" data-phrase="Forever yours">
                                    <img src="images/image1.jpeg" alt="Our moment" style="object-position: center 20%;">
                                    <span class="image-phrase">Forever my christmas wish</span>
                                    <span class="touch-hint-img">tap me</span>
                                </div>
                                <div class="montage-image" data-phrase="My everything">
                                    <img src="images/image2.jpeg" alt="Together" style="object-position: center 40%;">
                                    <span class="image-phrase">My Sukoon</span>
                                </div>
                                <div class="montage-image" data-phrase="Always & forever">
                                    <img src="images/image3.jpeg" alt="Us" style="object-position: center 30%;">
                                    <span class="image-phrase">Always jumping partner</span>
                                </div>
                                <div class="montage-image" data-phrase="You complete me">
                                    <img src="images/image7.jpeg" alt="Love" style="object-position: center 10%;">
                                    <span class="image-phrase">You complete me</span>
                                </div>
                                <div class="montage-image" data-phrase="Soulmates">
                                    <img src="images/image5.jpeg" alt="Forever" style="object-position: center 35%;">
                                    <span class="image-phrase">My Valentine</span>
                                </div>
                                <div class="montage-image" data-phrase="My heart">
                                    <img src="images/image6.jpeg" alt="Us forever" style="object-position: center;">
                                    <span class="image-phrase">My Everything</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Swipe right hint - above the letter -->
                    <div class="swipe-right-hint">
                        <span>‚Üí</span>
                        <span>swipe right to close</span>
                    </div>

                    <!-- Flip hint (visible when open) - positioned below -->
                    <div class="flip-hint" id="flipHint">
                        <span>‚Üê</span>
                        <span>swipe left to flip back</span>
                    </div>
                </div>
            </div>

            <!-- Back side of entire card -->
            <div class="card-back-side">
                <div class="back-content" id="backContent">
                    <div class="back-question">
                        Want to keep this letter<br>with you always?
                    </div>
                    <button class="keep-button" id="keepButton">
                        Keep Forever ‚ô•
                    </button>
                </div>
                
                <div class="kept-message" id="keptMessage">
                    <span class="heart-icon">‚ô•</span>
                    <div class="message">
                        This love letter now lives<br>forever in your heart
                    </div>
                </div>
                
                <div class="flip-back-hint" id="flipBackHint">
                    <span>‚Üí</span>
                    <span>Swipe right to return</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Overlay -->
    <div class="image-overlay" id="imageOverlay">
        <div class="overlay-hearts">
            <span class="overlay-heart">‚ô•</span>
            <span class="overlay-heart">‚ô•</span>
            <span class="overlay-heart">‚ô•</span>
            <span class="overlay-heart">‚ô•</span>
        </div>
        <div class="overlay-content">
            <img class="overlay-image" id="overlayImage" src="" alt="Memory">
            <div class="overlay-text" id="overlayText"></div>
        </div>
        <div class="overlay-close-hint">Tap anywhere to close</div>
    </div>

    <script>
        // Create floating hearts
        function createFloatingHearts() {
            const container = document.getElementById('floatingHearts');
            const hearts = ['‚ô•', '‚ô°', '‚ù§', 'üíï', 'üíó'];
            
            for (let i = 0; i < 20; i++) {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDelay = Math.random() * 15 + 's';
                heart.style.fontSize = (15 + Math.random() * 20) + 'px';
                container.appendChild(heart);
            }
        }

        // Create sparkle effect
        function createSparkle(x, y) {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle';
            sparkle.style.left = x + 'px';
            sparkle.style.top = y + 'px';
            document.body.appendChild(sparkle);
            setTimeout(() => sparkle.remove(), 800);
        }

        function createSparkles(x, y, count = 5) {
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    createSparkle(
                        x + (Math.random() - 0.5) * 100,
                        y + (Math.random() - 0.5) * 100
                    );
                }, i * 80);
            }
        }

        // Elements
        const cardFlipper = document.getElementById('cardFlipper');
        const book = document.getElementById('book');
        const frontCover = document.getElementById('frontCover');
        const keepButton = document.getElementById('keepButton');
        const backContent = document.getElementById('backContent');
        const keptMessage = document.getElementById('keptMessage');
        const flipBackHint = document.getElementById('flipBackHint');
        const montageImages = document.querySelectorAll('.montage-image');

        let isBookOpen = false;
        let isFlippedToBack = false;
        let isKept = false;

        // Open book
        function openBook(e) {
            if (isFlippedToBack || isBookOpen) return;
            
            isBookOpen = true;
            book.classList.add('open');
            cardFlipper.classList.add('book-open');
            createSparkles(e.clientX, e.clientY, 8);
        }

        frontCover.addEventListener('click', openBook);
        
        // Prevent clicks on inner pages and cover-back from bubbling
        document.querySelector('.inner-right-page').addEventListener('click', (e) => {
            e.stopPropagation();
        });
        document.querySelector('.cover-back').addEventListener('click', (e) => {
            e.stopPropagation();
        });
        
        // Enable letter scrolling on touch devices
        const letterScroll = document.querySelector('.letter-scroll');
        let touchInLetterScroll = false;
        if (letterScroll) {
            letterScroll.addEventListener('touchstart', (e) => {
                touchInLetterScroll = true;
                e.stopPropagation();
            }, { passive: true });
            
            letterScroll.addEventListener('touchmove', (e) => {
                // Non-passive so we can stop propagation properly
                e.stopPropagation();
            }, { passive: false });
            
            letterScroll.addEventListener('touchend', (e) => {
                touchInLetterScroll = false;
                e.stopPropagation();
            }, { passive: true });
        }

        // Flip card to back
        function flipToBack() {
            if (!isBookOpen || isFlippedToBack) return;
            
            // First close the book visually
            book.classList.remove('open');
            cardFlipper.classList.remove('book-open');
            
            // Then flip after a short delay
            setTimeout(() => {
                isBookOpen = false;
                isFlippedToBack = true;
                cardFlipper.classList.add('flipped-to-back');
            }, 500);
        }

        // Flip card to front
        function flipToFront() {
            if (!isFlippedToBack) return;
            
            isFlippedToBack = false;
            cardFlipper.classList.remove('flipped-to-back');
        }

        // Close book (go back to front cover)
        function closeBook() {
            if (!isBookOpen || isFlippedToBack) return;
            
            isBookOpen = false;
            book.classList.remove('open');
            cardFlipper.classList.remove('book-open');
        }

        // Swipe detection for flipping (horizontal swipes only)
        let touchStartY = 0;
        let touchStartX = 0;
        let touchStartTarget = null;

        // Check if element is inside letter scroll area
        function isInsideLetterScroll(element) {
            return element.closest('.letter-scroll') !== null;
        }

        // Check if element is inside montage area
        function isInsideMontage(element) {
            return element.closest('.montage-image') !== null || element.closest('.montage-content') !== null;
        }

        document.addEventListener('touchstart', (e) => {
            touchStartY = e.touches[0].clientY;
            touchStartX = e.touches[0].clientX;
            touchStartTarget = e.target;
        }, { passive: true });

        document.addEventListener('touchend', (e) => {
            // Skip if touch started inside montage images
            if (isInsideMontage(touchStartTarget)) {
                return;
            }

            // Skip if touch started inside letter scroll (allow normal scrolling)
            if (isInsideLetterScroll(touchStartTarget) || touchInLetterScroll) {
                return;
            }

            const touchEndY = e.changedTouches[0].clientY;
            const touchEndX = e.changedTouches[0].clientX;
            const diffY = Math.abs(touchEndY - touchStartY);
            const diffX = touchEndX - touchStartX;
            
            // Only horizontal swipes (more horizontal than vertical) with enough distance
            if (Math.abs(diffX) > 80 && Math.abs(diffX) > diffY * 1.5) {
                if (diffX < 0 && isBookOpen && !isFlippedToBack) {
                    // Swipe LEFT (right to left) ‚Üí flip to back
                    flipToBack();
                } else if (diffX > 0 && isFlippedToBack) {
                    // Swipe RIGHT (left to right) when on back ‚Üí flip to front (book stays open)
                    flipToFront();
                } else if (diffX > 0 && isBookOpen && !isFlippedToBack) {
                    // Swipe RIGHT (left to right) when book is open ‚Üí close book
                    closeBook();
                }
            }
        }, { passive: true });

        // Prevent pull-to-refresh on document when book is open (but allow letter scroll)
        document.addEventListener('touchmove', (e) => {
            if (isBookOpen && !isInsideLetterScroll(e.target)) {
                e.preventDefault();
            }
        }, { passive: false });

        // Remove mouse wheel flipping - let it scroll normally

        // Click on back to flip (as fallback)
        document.querySelector('.card-back-side').addEventListener('click', (e) => {
            if (e.target === keepButton || isKept) return;
            flipToFront();
        });

        // Keep button
        keepButton.addEventListener('click', (e) => {
            e.stopPropagation();
            isKept = true;
            
            createSparkles(e.clientX, e.clientY, 15);
            
            backContent.style.transition = 'all 0.8s ease';
            backContent.style.opacity = '0';
            backContent.style.transform = 'scale(0.8)';
            
            setTimeout(() => {
                backContent.style.display = 'none';
                keptMessage.classList.add('show');
                flipBackHint.style.display = 'none';
            }, 800);
        });

        // Image overlay elements
        const imageOverlay = document.getElementById('imageOverlay');
        const overlayImage = document.getElementById('overlayImage');
        const overlayText = document.getElementById('overlayText');

        // Open image overlay
        function openImageOverlay(imgSrc, phrase) {
            overlayImage.src = imgSrc;
            overlayText.textContent = phrase;
            imageOverlay.classList.add('active');
            createSparkles(window.innerWidth / 2, window.innerHeight / 2, 10);
        }

        // Close image overlay
        function closeImageOverlay() {
            imageOverlay.classList.remove('active');
        }

        // Click on overlay to close
        imageOverlay.addEventListener('click', (e) => {
            closeImageOverlay();
        });

        // Montage image interactions - open overlay on tap
        montageImages.forEach(img => {
            let imgTouchStartX = 0;
            let imgTouchStartY = 0;

            img.addEventListener('touchstart', (e) => {
                imgTouchStartX = e.touches[0].clientX;
                imgTouchStartY = e.touches[0].clientY;
            }, { passive: true });

            img.addEventListener('touchend', (e) => {
                e.stopPropagation();
                
                const touchEndX = e.changedTouches[0].clientX;
                const touchEndY = e.changedTouches[0].clientY;
                const diffX = Math.abs(touchEndX - imgTouchStartX);
                const diffY = Math.abs(touchEndY - imgTouchStartY);
                
                // Only trigger if it was a tap (minimal movement)
                if (diffX < 15 && diffY < 15) {
                    const imgElement = img.querySelector('img');
                    const phrase = img.querySelector('.image-phrase').textContent;
                    if (imgElement) {
                        openImageOverlay(imgElement.src, phrase);
                    }
                }
            });

            img.addEventListener('click', (e) => {
                e.stopPropagation();
                e.preventDefault();
                
                // Desktop click - open overlay
                const imgElement = img.querySelector('img');
                const phrase = img.querySelector('.image-phrase').textContent;
                if (imgElement) {
                    openImageOverlay(imgElement.src, phrase);
                }
            });
        });

        // Restore on visibility change
        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'visible' && isKept) {
                isKept = false;
                backContent.style.display = '';
                backContent.style.opacity = '1';
                backContent.style.transform = 'scale(1)';
                keptMessage.classList.remove('show');
                flipBackHint.style.display = '';
            }
        });

        // Initialize
        createFloatingHearts();
    </script>
</body>
</html>